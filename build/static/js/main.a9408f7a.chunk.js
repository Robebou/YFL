(this.webpackJsonpyfl_react=this.webpackJsonpyfl_react||[]).push([[0],{111:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(16),i=n.n(c),r=(n(55),n.p+"static/media/final_logo.2a48f6b7.png"),o=n(11),l=n(1),u=function(){return Object(l.jsx)("div",{className:"navigation",children:Object(l.jsxs)("header",{children:[Object(l.jsx)(o.b,{to:"/",children:Object(l.jsx)("img",{src:r,alt:"logo",class:"logo"})}),Object(l.jsx)("nav",{children:Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{className:"li-not-pp",children:Object(l.jsx)("a",{href:"#",children:"Ma Liste"})}),Object(l.jsx)("li",{className:"li-not-pp",children:Object(l.jsx)("a",{href:"#",children:"Film"})}),Object(l.jsx)("li",{className:"li-not-pp",children:Object(l.jsx)("a",{href:"#",children:"S\xe9rie"})}),Object(l.jsx)(o.b,{to:"/userPage",children:Object(l.jsx)("li",{children:Object(l.jsx)("a",{href:"#",children:Object(l.jsx)("img",{src:"https://meetanentrepreneur.lu/wp-content/uploads/2019/08/profil-linkedin.jpg",className:"img-nav-pp"})})})})]})})]})})},d=n(3),j=n.n(d),b=n(7),m=n(4),h=(n(63),n(13)),p=n(28),f=n(6),O=n.n(f),v=(n(82),n(83),n(84),n(29));O.a.defaults.withCredentials=!0;var g=function(e){var t=e.img,n=e.title,s=e.movie_id,c="http://localhost:8080/saveUserFilm",i=Object(a.useState)({isSeen:"",score:"",id_movie:"",id_user:"",like:""}),r=Object(m.a)(i,2),o=r[0],u=r[1],d=Object(a.useState)(void 0),f=Object(m.a)(d,2),g=f[0],x=f[1],N=Object(a.useState)(""),w=Object(m.a)(N,2),k=w[0],_=w[1],y=[{value:1,label:"Already Seen"},{value:2,label:"Planned to view"},{value:3,label:"Paused"},{value:4,label:"Dropped"}],S=[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"},{value:7,label:"7"},{value:8,label:"8"},{value:9,label:"9"},{value:10,label:"10"}];function C(e){var t=e.value,n=Object(h.a)({},o);n.score=t,u(n)}function U(e){var t=Object(h.a)({},o);t.isSeen=e.label,u(t)}function D(){return(D=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),""==o.score||""==o.isSeen?(_("Error"),console.log("error")):O.a.post(c,o).then((function(e){console.log(e),_(e.data.message)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useLayoutEffect)((function(){_(""),O.a.get("http://localhost:8080/getUserFilm",{params:{movie_id:s,user_id:o.id_user}}).then((function(e){if(console.log("oui"),console.log(e),1==e.data.loggedIn)if(x(!0),e.data.result.length>0){var t=e.data.result[0];u({isSeen:t.isSeen,score:t.score,like:t.isLiked,id_movie:t.movie_id,id_user:t.user_id})}else console.log(e),u({id_movie:s,id_user:e.data.user_id});else u({like:0}),x(!1)}))}),[]),g?Object(l.jsx)("div",{className:"popup-wrapper",children:Object(l.jsx)(p.a,{trigger:Object(l.jsx)("button",{className:"button-basic",children:"Add Film"}),modal:!0,nested:!0,children:function(e){return Object(l.jsxs)("div",{className:"modal",children:[Object(l.jsx)("button",{className:"close",onClick:e,children:"\xd7"}),Object(l.jsx)("div",{className:"popup-header",children:n}),Object(l.jsxs)("div",{className:"content-popup",children:[Object(l.jsx)("img",{src:t,className:"image-popup"}),Object(l.jsxs)("div",{className:"popup-right",children:[Object(l.jsxs)("div",{className:"select-wrapper",children:[Object(l.jsxs)("div",{className:"popup-select",children:[Object(l.jsx)("h2",{className:"h2-popup",children:"Current state : "}),Object(l.jsx)(v.a,{options:y,defaultValue:{label:o.isSeen,value:o.isSeen},onChange:U})]}),Object(l.jsxs)("div",{className:"popup-select",children:[Object(l.jsx)("h2",{className:"h2-popup",children:"Note : "}),Object(l.jsx)(v.a,{options:S,defaultValue:{label:o.score,value:o.score},onChange:C})]})]}),Object(l.jsxs)("div",{className:"coup-de-coeur",children:[Object(l.jsx)("input",{id:"toggle-heart",type:"checkbox",defaultChecked:o.like,onChange:function(e){!function(e){var t=Object(h.a)({},o);0==e.target.checked?t.like=0:t.like=1,u(t),console.log(t)}(e)}}),Object(l.jsx)("label",{for:"toggle-heart",children:"\u2764"})]})]})]}),Object(l.jsxs)("div",{className:"popup-footer",children:[Object(l.jsx)("div",{className:"popup-error",children:k}),Object(l.jsx)("button",{className:"button-basic",onClick:function(e){!function(e){D.apply(this,arguments)}(e)},children:"Validate"})]})]})}})}):Object(l.jsx)("div",{className:"popup-wrapper",children:Object(l.jsx)(p.a,{trigger:Object(l.jsx)("button",{className:"button-basic",children:"Add Film"}),modal:!0,children:function(e){return Object(l.jsx)("div",{className:"content",children:"You need to login !"})}})})},x="9ea3fe10f4f94f70b6169e29f0f576d6",N="https://image.tmdb.org/t/p/w500";var w=function(e){var t=e.movie_id,n=Object(a.useState)([]),s=Object(m.a)(n,2),c=s[0],i=s[1],r=Object(a.useState)([]),u=Object(m.a)(r,2),d=u[0],h=u[1];return Object(a.useEffect)((function(){(function(){var e=Object(b.a)(j.a.mark((function e(){var n,a,s,r,o,l,u;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.themoviedb.org/3/movie/".concat(t,"?api_key=").concat(x,"&language=en-US"),a="https://api.themoviedb.org/3/movie/".concat(t,"/similar?api_key=").concat(x,"&language=en-US&page=1"),e.next=4,fetch(n);case 4:return s=e.sent,e.next=7,s.json();case 7:return r=e.sent,e.next=10,fetch(a);case 10:return o=e.sent,e.next=13,o.json();case 13:l=e.sent,u=l.results.splice(0,10),0==r.budget?r.budget="undefined":r.budget+=" $",0==r.revenue?r.revenue="undefined":r.revenue+=" $",console.log(c),i(r),h(u);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]),Object(l.jsxs)("div",{className:"div-movie-detail",children:[Object(l.jsx)("h2",{className:"h2-detail",children:c.title}),Object(l.jsxs)("div",{className:"detail-affiche",children:[Object(l.jsxs)("div",{className:"affiche-button",children:[Object(l.jsx)("img",{src:N+c.poster_path,className:"image-movie-detail"}),Object(l.jsx)("div",{className:"detail-overview",children:c.overview})]}),Object(l.jsx)(g,{img:N+c.poster_path,title:c.title,movie_id:t},t)]}),Object(l.jsxs)("div",{className:"detail-bottom",children:[Object(l.jsxs)("div",{className:"detail-more-info",children:[Object(l.jsxs)("p",{children:["Budget : ",c.budget," "]}),Object(l.jsxs)("p",{children:["Revenue : ",c.revenue," "]}),Object(l.jsxs)("p",{children:["Vote Average :  ",c.vote_average]}),Object(l.jsxs)("p",{children:["Release Date : ",c.release_date]})]}),Object(l.jsxs)("div",{className:"detail-recommandation",children:[Object(l.jsx)("h2",{className:"h2-detail-recommndation",children:"Recommandation"}),d.map((function(e){return Object(l.jsx)(o.b,{to:"/movie/".concat(e.id),children:Object(l.jsx)("img",{src:N+e.poster_path,className:"image-movie-genre"})},e.id)}))]})]})]})},k=n(45),_=n(46),y=n(20),S=n(50),C=n(49);n(95);O.a.defaults.withCredentials=!0;var U=function(e){Object(S.a)(n,e);var t=Object(C.a)(n);function n(e){var a;return Object(k.a)(this,n),(a=t.call(this,e)).state={id:e.movie_id,commentaire:"",username:"",id_movie:"",id_user:"",logged:void 0,coms:[],size:void 0},a.handleChange=a.handleChange.bind(Object(y.a)(a)),a}return Object(_.a)(n,[{key:"componentDidMount",value:function(){this.fetchApi(),this.fetchCom()}},{key:"componentDidUpdate",value:function(){this.fetchCom()}},{key:"fetchCom",value:function(){var e=this;(function(){var t=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:O.a.get("http://localhost:8080/getCommentaire",{params:{movie_id:e.state.id}}).then((function(t){e.state.size!=t.data.size&&e.setState({coms:t.data.result,size:t.data.size}),console.log(t.data),console.log(t.data.size),console.log(e.state.size)}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}},{key:"fetchApi",value:function(){var e=this;(function(){var t=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:O.a.get("http://localhost:8080/login").then((function(t){console.log(t),1==t.data.loggedIn?e.setState({logged:!0,username:t.data.user[0].username,id_movie:e.state.movie_id,id_user:t.data.user[0].id}):e.setState({logged:!1})}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}},{key:"submit",value:function(e){var t=this;console.log(this.state.commentaire),function(){var n=Object(b.a)(j.a.mark((function n(){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.preventDefault(),""!=t.state.commentaire&&O.a.post("http://localhost:8080/save_com",{commentaire:t.state.commentaire,username:t.state.username,id_movie:t.state.id,id_user:t.state.id_user}).then((function(e){t.setState({commentaire:""}),console.log("ok")}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}},{key:"delete_com",value:function(e){var t=this;(function(){var n=Object(b.a)(j.a.mark((function n(){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:O.a.post("http://localhost:8080/deleteCommentaire",e).then((function(e){console.log(e),t.forceUpdate()})),console.log("Update");case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}},{key:"handleChange",value:function(e){this.setState({commentaire:e.target.value}),console.log(this.state.commentaire)}},{key:"showButton",value:function(e,t){var n=this;if(e==this.state.username)return Object(l.jsx)("button",{onClick:function(){n.delete_com(t)},children:"Delete"})}},{key:"render",value:function(){var e=this;return this.state.logged?Object(l.jsxs)("div",{className:"wrapper",children:[Object(l.jsxs)("form",{action:"",method:"POST",className:"form",children:[Object(l.jsx)("div",{className:"row"}),Object(l.jsxs)("div",{className:"input-group textarea",children:[Object(l.jsx)("label",{for:"comment",children:this.state.username}),Object(l.jsx)("textarea",{id:"comment",placeholder:"Enter your Comment",value:this.state.commentaire,onChange:this.handleChange,required:!0})]}),Object(l.jsx)("div",{className:"input-group",children:Object(l.jsx)("button",{classname:"btn",onClick:function(t){return e.submit(t)},children:"Post Comment"})})]}),Object(l.jsx)("div",{className:"prev-comments",children:this.state.coms.map((function(t){return Object(l.jsxs)("div",{class:"single-item",children:[Object(l.jsx)("h4",{children:t.username}),Object(l.jsx)("p",{children:t.commentaire}),e.showButton(t.username,t)]})}))})]}):Object(l.jsx)("div",{children:"Unlogged"})}}]),n}(s.a.Component),D=function(e){var t=e.match;return Object(l.jsx)("div",{className:"home",children:Object(l.jsxs)("div",{className:"div-home-body",children:[Object(l.jsx)(w,{movie_id:t.params.id}),Object(l.jsx)(U,{movie_id:t.params.id})]})})},F=n(47),E=(n(41),n(96),{duration:2e3,transitionDuration:500,infinte:!0,indicators:!0,arrows:!0});var L=function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)(Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/movie/popular?api_key=9ea3fe10f4f94f70b6169e29f0f576d6&language=en-US");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,s(n.results),console.log(n.results);case 8:case"end":return e.stop()}}),e)}))),[]),Object(l.jsxs)("div",{className:"slide-container",children:[Object(l.jsx)("h1",{className:"h1-trending",S:!0,children:"Trending Films"}),Object(l.jsx)(F.Fade,Object(h.a)(Object(h.a)({},E),{},{children:n.map((function(e){return Object(l.jsx)("div",{className:"each-fade",children:Object(l.jsx)("div",{className:"image-container",children:Object(l.jsx)(o.b,{to:"/movie/".concat(e.id),children:Object(l.jsx)("img",{src:"https://image.tmdb.org/t/p/w500"+e.poster_path})},e.id)})})}))}))]})},P=(n(97),n(42),n(48)),z=n.n(P),A=(n(110),function(e){var t=e.genre_id,n=Object(a.useState)([]),s=Object(m.a)(n,2),c=s[0],i=s[1],r="https://api.themoviedb.org/3/discover/movie?api_key=".concat("9ea3fe10f4f94f70b6169e29f0f576d6","&language=en-US&sort_by=popularity.desc&include_adult=false&with_genres=").concat(t);return Object(a.useEffect)((function(){function e(){return(e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(r);case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,i(n.results);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(l.jsx)("div",{children:Object(l.jsx)(z.a,{swipeable:!1,draggable:!1,showDots:!1,infinite:!0,responsive:{superLargeDesktop:{breakpoint:{max:4e3,min:3e3},items:10},desktop:{breakpoint:{max:3e3,min:1024},items:9},tablet:{breakpoint:{max:1024,min:464},items:4},mobile:{breakpoint:{max:464,min:0},items:3}},itemClass:"caroussel-item",children:c.map((function(e){return Object(l.jsx)(o.b,{to:"/movie/".concat(e.id),children:Object(l.jsx)("img",{src:"https://image.tmdb.org/t/p/w500"+e.poster_path,className:"image-movie-genre"})},e.id)}))})})}),R=function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)(Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=9ea3fe10f4f94f70b6169e29f0f576d6&language=en-US");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,s(n.genres),n.genres.map((function(e){delete e[""]})),console.log(n.genres);case 9:case"end":return e.stop()}}),e)}))),[]),Object(l.jsx)("div",{children:n.map((function(e){return Object(l.jsxs)("div",{className:"genre-container",children:[Object(l.jsx)("h2",{className:"h2-genre",children:e.name}),Object(l.jsx)(A,{genre_id:e.id})]})}))})},B=function(){return Object(l.jsx)("div",{className:"home",children:Object(l.jsxs)("div",{className:"div-home-body",children:[Object(l.jsx)(L,{}),Object(l.jsx)(R,{})]})})},I=n(5),T=(n(24),"http://localhost:8080/login");O.a.defaults.withCredentials=!0;var V=Object(I.g)((function(e){e.Login,e.error;var t=Object(a.useState)({username:"",password:""}),n=Object(m.a)(t,2),s=n[0],c=n[1],i=Object(a.useState)(!1),r=Object(m.a)(i,2),o=r[0],u=r[1];function d(){return(d=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),O.a.post(T,s).then((function(e){console.log(e),1==e.data.connected&&(u(!0),console.log(o))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){var t=Object(h.a)({},s);t[e.target.name]=e.target.value,c(t)}return o?Object(l.jsx)(I.a,{to:"/"}):Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:o}),Object(l.jsxs)("form",{className:"form-inner",children:[Object(l.jsx)("h2",{className:"h2-login",children:"Login"}),Object(l.jsxs)("div",{className:"input-group",children:[Object(l.jsx)("label",{htmlFor:"Username",children:"Username :"}),Object(l.jsx)("input",{className:"login-input",type:"text",name:"username",id:"username",onChange:function(e){return p(e)},value:s.username})]}),Object(l.jsxs)("div",{className:"input-group",children:[Object(l.jsx)("label",{htmlFor:"password",children:"Password :"}),Object(l.jsx)("input",{className:"login-input",type:"password",name:"password",id:"password",onChange:function(e){return p(e)},value:s.password})]}),Object(l.jsx)("input",{type:"submit",value:"Login",className:"login-btn",onClick:function(e){!function(e){d.apply(this,arguments)}(e)}})]})]})})),J="http://localhost:8080/register";var M=function(){var e=Object(a.useState)({username:"",password:"",confirm_password:""}),t=Object(m.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),i=Object(m.a)(c,2);function r(){return(r=Object(b.a)(j.a.mark((function e(t){var a,s,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)},e.next=4,fetch(J,a);case 4:return s=e.sent,e.next=7,s.json();case 7:c=e.sent,console.log(c);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e){var t=Object(h.a)({},n);t[e.target.name]=e.target.value,s(t),console.log(t)}return i[0],i[1],Object(l.jsx)("div",{children:Object(l.jsx)("form",{onSubmit:function(e){return r.apply(this,arguments)},children:Object(l.jsxs)("div",{className:"form-inner",children:[Object(l.jsx)("h2",{className:"h2-login",children:"Register"}),Object(l.jsxs)("div",{className:"input-group",children:[Object(l.jsx)("label",{htmlFor:"Username",children:"Username :"}),Object(l.jsx)("input",{type:"text",name:"username",id:"username",onChange:function(e){return o(e)},value:n.username})]}),Object(l.jsxs)("div",{className:"input-group",children:[Object(l.jsx)("label",{htmlFor:"password",children:"Password :"}),Object(l.jsx)("input",{type:"password",name:"password",id:"password",onChange:function(e){return o(e)},value:n.password})]}),Object(l.jsxs)("div",{className:"input-group",children:[Object(l.jsx)("label",{htmlFor:"password",children:"Confirm Password :"}),Object(l.jsx)("input",{className:"login-input",type:"password",name:"confirm_password",id:"confirm_password",onChange:function(e){return o(e)},value:n.confirm_password})]}),Object(l.jsx)("input",{type:"submit",value:"Register",className:"login-btn"})]})})})};var $=function(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),n=(t[0],t[1],Object(a.useState)()),s=Object(m.a)(n,2),c=s[0],i=s[1];return Object(l.jsxs)("div",{className:"register-login-container",children:[Object(l.jsxs)("div",{className:"button-container",children:[Object(l.jsx)("div",{className:"button-reg-log",onClick:function(){return i(!0)},children:"Login"}),Object(l.jsx)("div",{className:"button-reg-log",onClick:function(){return i(!1)},children:"Register"})]}),Object(l.jsxs)("div",{className:"box-container",children:[c&&Object(l.jsx)(V,{}),!c&&Object(l.jsx)(M,{})]})]})};n(111);O.a.defaults.withCredentials=!0;var q=function(){var e=Object(a.useState)({username:""}),t=Object(m.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(!0),i=Object(m.a)(c,2),r=i[0],o=i[1];return Object(a.useEffect)((function(){O.a.get("http://localhost:8080/login").then((function(e){s({username:e.data.user[0].username}),console.log(e)}))}),[]),r?Object(l.jsxs)("div",{className:"user-wrapper",children:[Object(l.jsxs)("h2",{className:"user-h2",children:["Welcome back ",n.username]}),Object(l.jsx)("div",{className:"user-film-wrapper"}),Object(l.jsx)("button",{onClick:function(){O.a.get("http://localhost:8080/logout").then((function(e){console.log("Log out"),o(!1)}))},children:"Log out"})]}):Object(l.jsx)(I.a,{to:"/"})};O.a.defaults.withCredentials=!0;var W=function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),n=t[0],s=t[1];return Object(a.useEffect)((function(){O.a.get("http://localhost:8080/login",{withCredentials:!0,credentials:"include"}).then((function(e){1==e.data.loggedIn&&s(!0)}))}),[]),Object(l.jsxs)("div",{children:[!n&&Object(l.jsx)($,{}),n&&Object(l.jsx)(q,{})]})};var Y=function(){return Object(l.jsx)(o.a,{children:Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(u,{}),Object(l.jsxs)(I.d,{children:[Object(l.jsx)(I.b,{exact:!0,path:"/",component:B}),Object(l.jsx)(I.b,{path:"/movie/:id",component:D}),Object(l.jsx)(I.b,{exact:!0,path:"/login",component:$}),Object(l.jsx)(I.b,{exact:!0,path:"/userPage",component:W})]})]})})};n(112);i.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(Y,{})}),document.getElementById("root"))},24:function(e,t,n){},42:function(e,t,n){},55:function(e,t,n){},63:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){}},[[113,1,2]]]);
//# sourceMappingURL=main.a9408f7a.chunk.js.map